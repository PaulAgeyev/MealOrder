<script src="../../../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
<link rel="import" href="../../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../../bower_components/iron-list/iron-list.html">
<link rel="import" href="../../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../../bower_components/iron-icons/iron-icons.html">
<dom-module id="vendor-menus">
    <template>
        <style>
            :host {
                height: 100vh;
                display: flex;
                flex-direction: column;
            }

            iron-list {
                flex: 1 1 auto;
            }

            app-toolbar {
                background-color: var(--google-green-700);
                box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.3);
                font-weight: bold;
                color: white;
                font-size: 18px;
                z-index: 1;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
            }

            app-toolbar paper-icon-button {
                --paper-icon-button-ink-color: white;
            }

            iron-list {
                --iron-list-items-container: {
                    max-width: 800px;
                    margin: 4% auto;
                    border-bottom: 1px solid #ddd;
                };
                background-color: #F2F2F2;
            }

            div[role="listbox"] {
                border: 1px solid #e5e5e5;
            }

            .item {
                @apply --layout-horizontal;
                /*padding: 20px;*/
                background-color: white;
                border: 1px solid #ddd;
                cursor: pointer;
                margin-bottom: 10px;
            }

            .avatar {
                height: 40px;
                width: 40px;
                border-radius: 20px;
                box-sizing: border-box;
                background-color: #DDD;
            }

            .pad {
                padding: 0;
                @apply --layout-flex;
                @apply --layout-vertical;
            }

            .shortText, .longText {
                font-size: 14px;
            }

            .longText {
                color: gray;
                display: none;
                margin-left: 3%;
            }

            .item.expand .longText {
                display: block;

            }

            .spacer {
                @apply --layout-flex;
            }

            @media (max-width: 460px) {
                paper-toolbar .bottom.title {
                    font-size: 14px;
                }
            }

            #expand-button {
                position: absolute;
                right: 0;
                bottom: 5px;
            }

            .primary {
                font-size: 16px;
                font-weight: bold;
            }

            .menu-dashboard {
                display: flex;
                justify-content: space-between;
            }

        </style>
        <iron-list id="list" items="[[items]]" as="item" selection-enabled multi-selection>
            <template>
                <div>
                    <div class$="[[getClassForItem(selected)]]" tabindex$="[[tabIndex]]">
                        <div class="pad">
                            <div class="primary">
                                <paper-item>[[item.name]]
                                    <paper-icon-button id="expand-button" icon="expand-more"
                                                       on-click="_reSelect"></paper-icon-button>
                                </paper-item>

                            </div>
                            <div class="longText">
                                <div style="display: flex; justify-content: space-between;">
                                    <div style="width: 50%; align-self: center;">
                                        Первые блюда
                                    </div>
                                    <div style="align-self: center; width: 50%;">
                                        Цена
                                    </div>
                                    <div style="width: 40px;">
                                    </div>
                                </div>
                                <dom-repeat items="[[item.dishes]]" as="dish">
                                    <template>
                                        <div class="menu-dashboard">
                                            <div style="width: 50%; align-self: center;">
                                                [[dish.title]]
                                            </div>
                                            <div style="align-self: center; width: 50%; padding-left: 25px;">
                                                [[dish.price]]₴
                                            </div>
                                            <div>
                                                <paper-icon-button icon="add"></paper-icon-button>
                                            </div>
                                        </div>
                                    </template>
                                </dom-repeat>
                            </div>
                        </div>
                    </div>
            </template>
        </iron-list>

    </template>
    <script>
        class VendorMenus extends Polymer.Element {
            static get is() {
                return 'vendor-menus';
            }

            static get properties() {
                return {
                    items: {
                        type: Array,
                        value: [
                            {
                                name: 'Пюре',
                                dishes: [
                                    {title: 'Борщ украинский', price: 35}, {
                                        title: 'Солянка', price: 40
                                    }]
                            },
                            {
                                name: 'Positive',
                                dishes: [{title: 'ssaniy borsch', price: 35}, {title: 'kon4enoe pirozenoe', price: 35}]
                            },
                            {
                                name: 'Negative',
                                dishes: [{title: 'krilishki svinki', price: 35}, {title: 'krilishki pashi', price: 35}]
                            }]
                    }
                }
            };

            attached() {
                // Use the document element
                this.$.list.scrollTarget = this.ownerDocument.documentElement;
            };

            getClassForItem(selected) {
                return selected ? 'item expand' : 'item';
            };

            _reSelect(e) {
                const div = this.shadowRoot.querySelector("#list");
                const iconButton = this.shadowRoot.querySelectorAll("paper-icon-button#expand-button")[e.model.index];
                if (!e.model.selected) {
                    div.selectIndex(e.model.index);
                    iconButton.icon = 'expand-less';
                }
                else {
                    div.deselectIndex(e.model.index);
                    iconButton.icon = 'expand-more';
                }
            }
        }


        window.customElements.define(VendorMenus.is, VendorMenus);
    </script>
</dom-module>
